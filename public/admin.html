<!DOCTYPE html>
<meta charset="utf-8">
<title>管理后台</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<div class="container py-4">
  <h3>管理后台</h3>
  <ul class="nav nav-tabs mb-3">
    <li class="nav-item"><button class="nav-link active" onclick="show('users')">用户管理</button></li>
    <li class="nav-item"><button class="nav-link" onclick="show('data')">所有数据</button></li>
  </ul>
  <div id="panel"></div>
</div>
<script>
let mode='users'
async function load(){
  if(mode==='users'){
    const r=await fetch('/api/admin/users')
    const j=await r.json()
    document.getElementById('panel').innerHTML=j.data.map(u=>`
      <div class="card p-3 mb-2">
        ${u.username} (${u.email}) 管理员：${u.is_admin?'是':'否'}
      </div>
    `).join('')
  }else{
    const r=await fetch('/api/admin/data')
    const j=await r.json()
    document.getElementById('panel').innerHTML=j.data.map(d=>`
      <div class="card p-3 mb-2">
        <strong>${d.username}</strong>：${d.title}
      </div>
    `).join('')
  }
}
function show(m){ mode=m; load() }
load()
</script>
